<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:local="clr-namespace=VeterinariaApp"
             x:Class="VeterinariaApp.Views.ListaMascotasPage"
             Title="Mascotas Registradas"
             BackgroundColor="#FAFAFA">

    <VerticalStackLayout>
        <!-- Barra de bÃºsqueda -->
        <SearchBar x:Name="busquedaBar"
                   Placeholder="Buscar por nombre o especie"
                   TextChanged="OnBusquedaTextChanged"
                   Margin="10"/>

        <CollectionView x:Name="mascotasCollection"
                        ItemsLayout="VerticalList"
                        Margin="10">
            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Frame BorderColor="#DDD" Padding="10" Margin="5">
                        <VerticalStackLayout Spacing="10">
                            <HorizontalStackLayout Spacing="15">
                                <Image Source="{Binding FotoPath}"
                                       WidthRequest="100"
                                       HeightRequest="100"
                                       Aspect="AspectFill"
                                       BackgroundColor="#EEE"
                                       IsVisible="{Binding FotoPath, Converter={StaticResource NullToBoolConverter}}"/>

                                <VerticalStackLayout>
                                    <Label Text="{Binding Nombre}" FontSize="20" FontAttributes="Bold"/>
                                    <Label Text="{Binding Especie}" FontSize="16"/>
                                    <Label Text="{Binding Raza}" FontSize="16"/>
                                    <Label Text="{Binding Edad}" FontSize="16"/>
                                </VerticalStackLayout>
                            </HorizontalStackLayout>

                            <!-- Botones de acciÃ³n -->
                            <HorizontalStackLayout HorizontalOptions="End" Spacing="10">
                                <Button Text="âœï¸ Editar"
                                        Clicked="OnEditarClicked"
                                        BackgroundColor="#2196F3"
                                        TextColor="White"
                                        CommandParameter="{Binding .}" />

                                <Button Text="ðŸ—‘ï¸ Eliminar"
                                        Clicked="OnEliminarClicked"
                                        BackgroundColor="#F44336"
                                        TextColor="White"
                                        CommandParameter="{Binding .}" />
                            </HorizontalStackLayout>
                        </VerticalStackLayout>
                    </Frame>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>
    </VerticalStackLayout>
</ContentPage>
